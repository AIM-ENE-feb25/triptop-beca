@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title Triptop - Component Diagram (Meerdere externe calls)

Container(trip_trop, "TripTop", "React, Spring Boot", "Hoofdapplicatie")
Container(db, "Database", "SSMS", "Opslag van gegevens")
System_Ext(overnachting_vervoer, "Booking COM API", "Geeft informatie over accommodaties, autohuur, vluchten en attracties, de beschikbaarheid hiervan en boekt tickets.")

Container_Boundary(backend, "API Calls System") {
 Component(reservatie_controller, "Reservatie Controller", "Spring Boot", "Verstuurt boeking aanvragen")
 Component(volgorde_checker, "Volgorde Checker", "Spring Boot", "Handelt meerdere aanroepen correct af")
 Component(booking_adapter, "Booking Adapter", "Spring Boot", "Connecteert met Booking.com en zorgt voor correcte informatie afhandeling")
 Component(trip_repository, "Trip Repository", "Spring Boot", "Slaat alle data op in de database")

 Rel(trip_trop, reservatie_controller, "Maakt API calls naar", "REST")
 Rel(reservatie_controller, booking_adapter, "Verstuurt de verzoek naar", "REST")
 Rel(booking_adapter, volgorde_checker, "Verstuurt ontvangen data door", "REST")
 Rel(volgorde_checker, trip_repository, "Correcte data wordt verzamled in repository", "REST")
 Rel(trip_repository, db, "Slaat gekregen data op", "JDBC")
 Rel(booking_adapter, overnachting_vervoer, "Haalt boeking data op", "JSON / HTTPS")
}

@enduml